[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About me\n\n\nお問い合わせ・各種連絡\nお問い合わせ\n\n\n更新履歴\n\n2025-07-20: β版を公開\n2025-08-08: quarto-pubで公開\n2025-08-10: デザインを大幅に変更\n2025-08-20: サーバーをgithub-pagesに移行\n2025-08-31: 記事ページのデザインを変更\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/list_science.html",
    "href": "contents/list_science.html",
    "title": "science -サイエンス（科学）-",
    "section": "",
    "text": "並び替え\n      デフォルト\n      \n        日付 - 日付（昇順）\n      \n      \n        日付 - 日付（降順）\n      \n      \n        分類\n      \n    \n  \n\n\n\n\n\n\n\n\n\n\nアミノ酸略号一覧表\n\n\n\nscience\n\nアミノ酸\n\n\n\nアミノ酸の構造式と略号の一覧表です。空欄バージョンも公開しています。教育目的であればフリーです。\n\n\n\n\n\n2025/08/27\n\n\n\n\n\n一致なし\n トップに戻る"
  },
  {
    "objectID": "contents/list_memo.html",
    "href": "contents/list_memo.html",
    "title": "note",
    "section": "",
    "text": "並び替え\n      デフォルト\n      \n        日付 - 日付（昇順）\n      \n      \n        日付 - 日付（降順）\n      \n    \n  \n\n\n\n\n\n\n\n\n\n\nAMBERの原子選択（アトムマスク）を完全に理解する\n\n\n\ncpptraj\n\n備忘録\n\n\n\nAMBERのアトムマスク選択構文を理解し、思い通りに使えるようにします。cpptrajやpytrajも同様の方法を使います。\n\n\n\n\n\n2025/08/25\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2を用いた棒グラフの作成\n\n\n\n備忘録\n\nR\n\nggplot2\n\n\n\nggplot2を用いて、ゼロからエラーバーや有意差の有無を表示した棒グラフを作成します。検定やデータの整形も同時に行います。\n\n\n\n\n\n2025/08/08\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2グラフの背景透過\n\n\n\n備忘録\n\nR\n\nggplot2\n\n\n\nggplot2で作成したグラフの背景を、themeをいじることで透過させます。\n\n\n\n\n\n2025/08/12\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2テーマの自作\n\n\n\n備忘録\n\nR\n\nggplot2\n\n\n\nggplot2で作成するグラフのテーマを自作する。（執筆途中）\n\n\n\n\n\n2025/08/10\n\n\n\n\n\n\n\n\n\n\n\n\n【R ggplot2】棒グラフの順番を入れ替える方法\n\n\n\nggplot2\n\n棒グラフ\n\n\n\nggplot2で作成した棒グラフや箱ひげ図の順番を簡単に任意の順番に入れ替える方法を解説します。\n\n\n\n\n\n2025/09/12\n\n\n\n\n\n\n\n\n\n\n\n\n機関契約chemdrawのインストール・アクティベーションの方法\n\n\n\n備忘録\n\nchemdraw\n\n\n\n大学や機関が契約したchemdrawを自PCにインストールし、アクティベーションする。\n\n\n\n\n\n2025/08/24\n\n\n\n\n\n一致なし\n トップに戻る"
  },
  {
    "objectID": "contents/society/population_japan/population_japan.html",
    "href": "contents/society/population_japan/population_japan.html",
    "title": "日本の総人口の推移グラフ",
    "section": "",
    "text": "グラフ\n\n\n\n\n\n\n作成日\n2025-08-30\n\n\nデータ取得日\n2025-08-30\n\n\nデータ元\n総務省統計局｜人口推計\n\n\n使用したパッケージ\nR, ggplot2\n\n\n\nPNGをダウンロード\n\n\n\n\n作成スクリプト\n\nlibrary(tidyverse)\n\ntate &lt;- function(x){\n  x &lt;- strsplit(split=\"\", x)\n  sapply(x, paste, collapse=\"\\n\")\n}\n\npopulation &lt;- function(data, x){\n    x &lt;- data %&gt;%\n    filter(year == x, sex == \"sum\") %&gt;%\n    pull(population)\n}\n\npopulation_data &lt;- read.csv('./population_japan.csv')\npopulation_data &lt;- population_data %&gt;% group_by(year,sex)\n\nplot &lt;- ggplot(population_data, aes(x=year, y=population, color=sex)) +\n    geom_line(aes(linetype=type), linewidth=1) +\n    geom_point(data=population_data%&gt;%filter(year==2020), size=2) +\n    scale_color_manual(values=c(\"#ff256eff\",\"#2b87ffff\",\"#0c0c0cff\", \"gray\", \"gray\")) +\n    scale_x_continuous(limits=c(1920,2045), expand=c(0,0),\n    breaks=seq(1920,2100,20)) +\n    scale_y_continuous(limits=c(0,160000), expand=c(0,0),\n    breaks=seq(0,150000,25000), label=seq(0,1.5,0.25)) +\n    labs(\n        title = '日本の総人口推移と内訳 (1920-2020) ※総務省統計局より',\n        x = '年',\n        y = '人口 (億人)',\n    ) +\n\n    # 関東大震災\n    geom_segment(x=1923, xend=1923, color=\"black\",\n    y=population(population_data,1923), \n    yend=population(population_data,1923)-10000) +\n    geom_text(x=1923, y=population(population_data,1923)-15000,\n    label=\"関東大震災\", color=\"black\", vjust=0.5, hjust=0.1) +\n    # 第二次世界大戦\n    geom_segment(x=1939, xend=1939, y=population(population_data,1939)-2000, yend=63000, color=\"darkred\") +\n    geom_segment(x=1945, xend=1945, y=population(population_data,1945)-2000, yend=63000, color=\"darkred\") +\n    geom_segment(x=1939, xend=1945, y=63000, yend=63000, color=\"darkred\") +\n    geom_text(x=(1939+1945)/2, y=58000, label=\"第二次世界大戦\", color=\"darkred\", vjust=0.5) +\n    # 第一次ベビーブーム\n    geom_segment(x=1947, xend=1947, y=population(population_data,1947)+2000, yend=90000, color=\"darkgreen\") +\n    geom_segment(x=1949, xend=1949, y=population(population_data,1949)+2000, yend=90000, color=\"darkgreen\") +\n    geom_segment(x=1947, xend=1949, y=90000, yend=90000, color=\"darkgreen\") +\n    geom_text(x=(1947+1949)/2, y=93500, label=\"第一次ベビーブーム\", color=\"darkgreen\", vjust=0, hjust=.85) +\n    # 第二次ベビーブーム\n    geom_segment(x=1971, xend=1971, y=population(population_data,1971)+2000, yend=130000, color=\"darkgreen\") +\n    geom_segment(x=1974, xend=1974, y=population(population_data,1974)+2000, yend=130000, color=\"darkgreen\") +\n    geom_segment(x=1971, xend=1974, y=130000, yend=130000, color=\"darkgreen\") +\n    geom_text(x=(1971+1974)/2, y=133500, label=\"第二次ベビーブーム\", color=\"darkgreen\", vjust=0, hjust=.5) +\n    # 高度経済成長期\n    geom_segment(x=1955, xend=1955, y=population(population_data,1955)+2000, yend=115000, color=\"darkblue\") +\n    geom_segment(x=1973, xend=1973, y=population(population_data,1973)+2000, yend=115000, color=\"darkblue\") +\n    geom_segment(x=1955, xend=1973, y=115000, yend=115000, color=\"darkblue\") +\n    geom_text(x=(1955+1973)/2, y=118500, label=\"高度経済成長\", color=\"darkblue\", vjust=0, hjust=.7) +\n    # バブル崩壊\n    geom_segment(x=1991, xend=1991, y=population(population_data,1991), color='black',\n    yend=population(population_data,1991)-10000) +\n    geom_text(x=1991, y=population(population_data,1991)-15000,\n    label=\"バブル崩壊\", color=\"black\", vjust=0.5, hjust=0.8) +\n    # 阪神・淡路大震災\n    geom_segment(x=1995, xend=1995, y=population(population_data,1995), color='black',\n    yend=population(population_data,1995)-24000) +\n    geom_text(x=1991, y=population(population_data,1995)-29000,\n    label=\"阪神・淡路大震災\", color=\"black\", vjust=0.5, hjust=0) +\n    # 2010\n    geom_segment(x=2010, xend=2010, y=population(population_data,2010), color='darkblue',\n    yend=population(population_data,2010)+10000) +\n    geom_text(x=2010, y=population(population_data,2010)+15000,\n    label=\"人口ピーク(1億2800万人)\", color=\"darkblue\", vjust=0, hjust=0.5) +\n    # 東日本大震災\n    geom_segment(x=2011, xend=2011, y=population(population_data,2011), color='black',\n    yend=population(population_data,2011)-10000) +\n    geom_text(x=2011, y=population(population_data,2011)-15000,\n    label=\"東日本大震災\", color=\"black\", vjust=0.5, hjust=0.3) +\n    geom_text(x=2020, y=64797+6500,\n    label=\"女性人口\", color=\"#ff256eff\", vjust=0.5, hjust=-0.08) +\n    geom_text(x=2020, y=61350-6000,\n    label=\"男性人口\", color=\"#2b87ffff\", vjust=0.5, hjust=-0.08) +\n    theme(\n        ## テキストの設定\n        plot.title = element_text(size = 15, color=\"black\", hjust = 0.5),\n        axis.title.x = element_blank(),\n        axis.text.x = element_text(size = 13, color=\"black\", hjust = 0.5),\n        axis.title.y = element_text(size = 15, color=\"black\", hjust = 0.5),\n        axis.text.y = element_text(size = 13, color=\"black\", hjust = 0.5),\n        #axis.ticks.x = element_blank(),\n        ## 枠・目盛りの設定\n        legend.position = \"none\",\n        panel.grid.major.y = element_line(linewidth=1, color = \"#e7e7e7ff\"),\n        panel.grid.major.x = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.border = element_rect(color='black', fill='transparent', linewidth=0.8),\n        panel.background = element_rect(fill = \"white\",color = NA),\n        aspect.ratio = .6,\n    )\n\nggsave(\n  plot = plot,\n  file = './population_ja.png',\n  dpi = 300,\n  width = 6.5,\n  height = 5\n)\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/society/koureika/koureika.html",
    "href": "contents/society/koureika/koureika.html",
    "title": "市町村別高齢者割合マップ",
    "section": "",
    "text": "都道府県別市町村ごとの65歳以上人口割合\nページ最下部に生成スクリプトを記載しています。\n\n\n\n作成日\n2025-09-02\n\n\nデータ取得日\n2025-027\n\n\nデータ元\n令和二年国勢調査｜人口基本集計\n\n\n使用したパッケージ\nR, ggplot2\n\n\n\n\n北海道・東北\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n関東\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n北陸\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n中部\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n近畿\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n中国\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n四国\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n九州・沖縄\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nソースコード\n\nlibrary(sf)\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(stringr)\nlibrary(readxl)\n\n\ndata_file &lt;- file.path('../data', 'major_results_2020.xlsx')\ndata &lt;- read_excel(data_file)\n\ngeodata_file &lt;- file.path('../data','N03-20250101.geojson')\ngeodata &lt;- st_read(geodata_file) %&gt;%\n    rename('shityouson' = 'N03_004', '市町村コード' = 'N03_007')\n\nprefdata_file &lt;- file.path('../data', 'pref_lat_lon.csv')\nprefdata &lt;- read.csv(prefdata_file) %&gt;% rename('都道府県名'='pref_name')\n\npref_list &lt;- c('北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '山梨県', '長野県', '新潟県', '富山県', '石川県', '福井県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県')\n\n\nmerge_data &lt;- merge(geodata, data, by='市町村コード', all.geodata=TRUE)\n\nget_png &lt;- function(filename) {\n  grid::rasterGrob(png::readPNG(filename), interpolate = TRUE)\n}\n\nl &lt;- get_png('./logoandurl.png')\nt &lt;- grid::roundrectGrob()\n\n\nfor (pref_name in pref_list) {\n    print(pref_name)\n    merge_data2 &lt;- dplyr::filter(merge_data, 都道府県名==pref_name)\n    title &lt;- sprintf('市町村別高齢者人口割合 (%s, 2020年)', pref_name)\n\n    koureikamap &lt;- ggplot(merge_data2) +\n        geom_sf(aes(fill = 人口65歳以上割合),linewidth=0.1, color='#303030') +\n\n        scale_fill_gradient2(low='blue', mid='yellow', high='red', name='(%)', midpoint=40, limits=c(15,65)) +\n        ggtitle(title) +\n        theme(\n              ## テキストの設定\n              plot.title = element_text(family = \"sans\", size = 10, color=\"black\", hjust = 0.5, face=\"bold\"),\n              axis.text.x = element_blank(),\n              axis.title.x = element_blank(),\n              axis.title.y = element_blank(),\n              axis.text.y = element_blank(),\n              axis.ticks.x = element_blank(),\n              axis.ticks.y = element_blank(),\n              legend.key.height=unit(0.5,'cm'),\n              legend.key.width= unit(0.1, 'cm'),\n              legend.title = element_text(family=\"sans\",size=7,color=\"black\",face=\"bold\"),\n              legend.text = element_text(family=\"sans\",size=7,color=\"black\",face=\"bold\"),\n              legend.ticks = element_blank(),\n              panel.grid.major = element_blank(),\n              panel.grid.minor = element_blank(),\n              plot.margin = unit(c(0.5, 0.5, 1.5, 0.5), \"lines\"),\n              panel.background = element_rect(fill = \"#f0f7ff\",color = NA)\n        )\n\n        if (pref_name=='東京都') {\n            koureikamap &lt;- koureikamap +\n                scale_x_continuous(limits=c(138.9, 140), expand=c(0,0), breaks=c(seq(120,150,5))) +\n                scale_y_continuous(limits=c(35.4, 36), expand=c(0,0), breaks=c(seq(30,50,5)))\n        }\n\n    ggsave(file = sprintf(\"./png/koureika_%s.png\",pref_name), plot=koureikamap, dpi = 150, width = 3.5, height = 3.5)\n}\n\n\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/rearrange_order/rearrage_order.html",
    "href": "contents/memo/rearrange_order/rearrage_order.html",
    "title": "【R ggplot2】棒グラフの順番を入れ替える方法",
    "section": "",
    "text": "1. 結論\n並べ替えたい要素をfactor型にしてlevelを指定します。\n\n# dataというデータフレームのtypeの順番を(x,y,z)に指定したいとき、\ndata &lt;- transform(data, type=factor(type, levels=c(x,y,z)))\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/atom_selection/atom_selection.html",
    "href": "contents/memo/atom_selection/atom_selection.html",
    "title": "AMBERの原子選択（アトムマスク）を完全に理解する",
    "section": "",
    "text": "Tip\n\n\n\n本記事はAMBER-Hub Atom Mask Selection Syntaxの内容を基に作成しています。\n\n\n\n1. 基本\ncpptrajの原子指定では、ある特別な文字（:, @, *） の後に、残基番号や原子名等を指定することで原子を選択することができます。\n\n\n2. 残基・原子・チェーンの選択\n\n2.1 残基の選択\n残基は、:に続いて残基番号や残基名を指定することで選択することができます。\n残基番号を指定する場合、-を用いることで範囲を、,を用いることで複数範囲を指定することができます。\n# 基本構文\n:(残基番号または残基名)\n\n# 残基番号2番を選択\n:2\n# 残基番号1から10番までを選択\n:1-10\n# 残基番号1から10番までと、15番を選択\n:1-10,15\n# 全てのアラニンを選択\n:ALA\n# 全てのアラニンとリシンを選択\n:ALA,LYS\n\n\n\n\n\n\n例として、シニョリンを用います\n\n\n\n\n\n\n\n:2残基番号2番\n\n\n\n\n\n\n\n:2,5-7残基番号2番と5から7番\n\n\n\n\n\n\n\n:GLY全てのグリシン残基\n\n\n\n\n\n\n\n2.2 原子の選択\n原子は@に続いてファイル中の原子番号や原子要素名を指定することで選択することができます。\n残基の場合と同様に-を用いることで範囲を、,を用いることで複数範囲を指定することができます。\n@に続いて\\や%を記述することで、それぞれ元素名と原子タイプを指定することができます。\n\n\n\n\n\n\n注意：元素記号と原子要素名は別\n\n\n\n原子の要素名で選択する場合、必ずしも元素記号と一致しないことに注意が必要です。例えば、酸素を指定したい場合、@Oだと全ての酸素を指定できない場合が多いです。あくまで、“O”という原子要素名がついた原子のみが選択されます。すべての酸素を選択したい場合は、原子要素名を指定する@ではなく、元素を指定する@/を使うか、第3章で解説するワイルドカードを使います。\n\n\n# 基本構文\n@(残基番号または残基名)\n@\\(元素名)     \n@%(原子タイプ名)\n\n# ファイル中の1番原子を選択\n@1\n# 1番原子から10番原子までを選択\n@1-10\n# 1番原子から10番原子までと、15番原子を選択\n@1-10,15\n# 全てのCα原子を選択\n@CA\n# 全ての原子要素名\"O\"と\"N\"を選択\n@O,N\n# 全ての酸素原子と窒素を選択\n@\\O,N\n# 全ての原子タイプCTを選択\n@%CT\n\n\n\n\n\n\n@CA原子要素名CA(タンパク質のCα原子)\n\n\n\n\n\n\n\n@O,N原子要素名OとNこの選択だと原子要素名が”O”と”N”の原子のみが選択される。酸素原子であっても、OG1,OD1,OHなど、ほかの原子要素名は選択されない。\n\n\n\n\n\n\n\n@/O,N酸素原子と窒素原子これで全ての酸素原子と窒素原子が選択される。\n\n\n\n\n\n\n\n@H*全ての水素原子第3章で解説するワイルドカードを用いても元素での選択ができる。\n\n\n\n\n\n\n\n2.3 チェーン（鎖）の選択\nPDBファイルによってはファイル内に複数のチェーンが含まれている場合があります。\nチェーンは::に続いてチェーンIDを指定することで選択できます。\n# 基本構文\n::(チェーンID)\n\n# A鎖を選択\n::A\n# A鎖とC鎖を選択\n::A,C\n\n\n\n\n\n\n例として、PDBID:6bs1のDNAポリメラーゼKを用います。\n\n\n\n\n\n\n\n::AチェーンA\n\n\n\n\n\n\n\n::A,C,P,D,TチェーンA,C,P,D,T\n\n\n\n\n\n\n\n2.4 チェーンと残基と原子を組み合わせて指定する\nこれらはすべて組み合わせて選択することができます。\n組み合わせる場合、基本的にチェーン、残基、原子の順番で指定します。\n例えば、A鎖のリシンのCα原子を選択したい場合、次のように記述します。\n# A鎖のリシンのCα原子\n::A:LYS@CA\n\n\n\n3. ワイルドカードを使う\ncpptrajの原子選択ではワイルドカードを用いることができます。 ワイルドカードとは、任意の文字列のことです。これを使うことで、例えばHで始まる原子要素名を一気に指定することができます。\ncpptrajで使うことができるワイルドカード文字は*, =, ?の３つです。\n\n*: 0文字以上の任意の文字列（0文字でも大丈夫）\n=: 0文字以上の任意の文字列（*と同じ意味）\n?: 1文字の任意の文字列\n\n使用例\n# 原子要素名がHで始まるすべての原子（全水素原子）（@H,H1,H2,H......）\n@H*\n@H=\n# 残基番号の下一桁が'5'で二桁番目に存在する残基 (:15,25,35,45,55,65,75,85,95)\n:?5\n\n\n4. 論理演算子を使う\n論理演算子も用いることができます。AND, OR, NOTにあたる&, |, !の３つがサポートされています。\nまた、(と)も使えます。\n使用例\n# 残基番号10-50までの炭素のうち、アラニンとシステインに属するものを除く\n:10-50&!(:ALA,CYS)\n# 水素以外のすべての原子\n:*&!H* \n:*&!@H=\n!@H=\n\n\n5. 距離で指定する\nアスパラギン酸残基から5Å以内のナトリウムイオンのように、距離を指定して選択したい場合があります。\nこのような場合、「指定した残基や原子から指定距離より近い（遠い）原子や分子」のように選択することができます。\n\n距離での選択は「&gt;または’&lt;’」と、「^または:または@」を組み合わせた2文字の演算子（例：&lt;^ や &gt;@ …）と、Å距離を組み合わせて行います。 （^は分子、:は残基、@は原子を表します。）\n構文： (アトムマスク) (2文字の距離演算子) (Å距離)\n# 10番残基から2.5Å以内の原子\n:10&lt;@2.5\n# 10から20番残基から2.5Å以内のアラニン残基\n(:10-20&lt;:2.5)&:ALA\n# アスパラギン酸残基から5Å以内のナトリウムイオン\n(:ASP&lt;@5)&:Na+\n\n\n6. よく使う例\n\n\n\n意味\nコマンド\n\n\n\n\n水素以外のすべての原子\n!@H*\n\n\nタンパク質の全てのバックボーン原子\n@CA,C,O,N,H\n\n\n水とナトリウム・塩素イオン以外のすべての原子\n!(:WAT,Na+,Cl-)\n\n\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/theme_costom/theme_costom.html",
    "href": "contents/memo/theme_costom/theme_costom.html",
    "title": "ggplot2テーマの自作",
    "section": "",
    "text": "今回は、この棒グラフのテーマを変更していきます。\n\n\n\n\n\n\n\n\n\n\nデフォルトで用意されたテーマ\nggplot2では既にtheme_gray(), theme_bw(), theme_linedraw(), theme_light(), theme_dark(), theme_minimal, theme_classic(), theme_void(), theme_test()の９つのテーマが用意されており、デフォルトでは`theme_bw()が適用されています。\n\nggplot2 Complete Themes\n\n\n\n\n\ntheme_gray\n\n\n\n\n\n\n\n\n\ntheme_bw\n\n\n\n\n\n\n\n\n\ntheme_linedraw\n\n\n\n\n\n\n\n\n\n\n\ntheme_light\n\n\n\n\n\n\n\n\n\ntheme_dark\n\n\n\n\n\n\n\n\n\ntheme_minimal\n\n\n\n\n\n\n\n\n\n\n\ntheme_classic\n\n\n\n\n\n\n\n\n\ntheme_void\n\n\n\n\n\n\n\n\n\ntheme_test\n\n\n\n\n\n\n\n\n\n\n\nテーマの自作\n自作のテーマを作るには、適当な変数に指定したいテーマの要素を書き込むだけです。具体的には下のように、theme()を書き込みます。作成したテーマはデフォルトのテーマと同じように使うことができます。\nあるテーマに別のテーマを重ねることもできます。\ntheme_costom &lt;- theme(\n  # ここに指定しい要素を書き込んでいきます。\n  # axis.line = ...\n)\n\n# いつも通り指定することで適用できます。\nplot &lt;- plot + theme_costom # これでplotにカスタムテーマが適用される。\n\nきまり\n設定するそれぞれの要素には、element_blank()かelement_text()か、element_line()か、element_rect()のいずれかを指定します。その要素をなくしたい場合（何も表示したくない場合）はelement_blank()を指定します。\n\n\n\n\n\n\n\n\n\n削除\nelement_blank()\n\n\n\n\nテキスト\nelement_text()\n・family・face・colour・size・lineheight・hjust・vjust・angle・margin・debug\nフォント書体（plain, italic, bold, bold.italic）文字色文字サイズ行の高さ水平方向の位置（0: 左揃え, 0.5: 中央揃え, 1: 右揃え）垂直方向の位置（0: 下揃え, 0.5: 中央揃え, 1: 上揃え）文字角度マージンデバッグ\n\n\n線\nelement_line()\n・color・linewidth・linetype・lineend\n線の色線の幅線のスタイル（0から6で指定）線末端のスタイル（round, butt, square）\n\n\n四角形\nelement_rect()\n・fill・color・linewidth・linetype\n塗りつぶし色枠線の色枠線の幅枠線のスタイル\n\n\n\n\n\n指定する要素\n非常に長くなり見づらいですが、themeの中には以下のような要素を設定することができます。\ntheme(\n  title,                  # タイトル\n  aspect.ratio,           # 縦横比（1:正方形, 0.5:横:縦=2:1の長方形）\n  axis.title,             # 軸タイトル\n  axis.title.x,           # x軸タイトル\n  axis.title.x.top,\n  axis.title.x.bottom,\n  axis.title.y,           # y軸タイトル\n  axis.title.y.left,\n  axis.title.y.right,\n  axis.text,              # 目盛りのテキスト\n  axis.text.x,\n  axis.text.x.top,\n  axis.text.x.bottom,\n  axis.text.y,\n  axis.text.y.left,\n  axis.text.y.right,\n  axis.text.theta,\n  axis.text.r,\n  axis.ticks,             # 目盛り\n  axis.ticks.x,\n  axis.ticks.x.top,\n  axis.ticks.x.bottom,\n  axis.ticks.y,\n  axis.ticks.y.left,\n  axis.ticks.y.right,\n  axis.ticks.theta,\n  axis.ticks.r,\n  axis.minor.ticks.x.top, \n  axis.minor.ticks.x.bottom,\n  axis.minor.ticks.y.left,\n  axis.minor.ticks.y.right,\n  axis.minor.ticks.theta,\n  axis.minor.ticks.r,\n  axis.ticks.length,\n  axis.ticks.length.x,\n  axis.ticks.length.x.top,\n  axis.ticks.length.x.bottom,\n  axis.ticks.length.y,\n  axis.ticks.length.y.left,\n  axis.ticks.length.y.right,\n  axis.ticks.length.theta,\n  axis.ticks.length.r,\n  axis.minor.ticks.length,\n  axis.minor.ticks.length.x,\n  axis.minor.ticks.length.x.top,\n  axis.minor.ticks.length.x.bottom,\n  axis.minor.ticks.length.y,\n  axis.minor.ticks.length.y.left,\n  axis.minor.ticks.length.y.right,\n  axis.minor.ticks.length.theta,\n  axis.minor.ticks.length.r,\n  axis.line,            # 軸の線\n  axis.line.x,\n  axis.line.x.top,\n  axis.line.x.bottom,\n  axis.line.y,\n  axis.line.y.left,\n  axis.line.y.right,\n  axis.line.theta,\n  axis.line.r,\n  legend.background,     # 凡例の背景\n  legend.margin,\n  legend.spacing,\n  legend.spacing.x,\n  legend.spacing.y,\n  legend.key,\n  legend.key.size,\n  legend.key.height,\n  legend.key.width,\n  legend.key.spacing,\n  legend.key.spacing.x,\n  legend.key.spacing.y,\n  legend.frame,\n  legend.ticks,\n  legend.ticks.length,\n  legend.axis.line,\n  legend.text,\n  legend.text.position,\n  legend.title,\n  legend.title.position,\n  legend.position,\n  legend.position.inside,\n  legend.direction,\n  legend.byrow,\n  legend.justification,\n  legend.justification.top,\n  legend.justification.bottom,\n  legend.justification.left,\n  legend.justification.right,\n  legend.justification.inside,\n  legend.location,\n  legend.box,\n  legend.box.just,\n  legend.box.margin,\n  legend.box.background,\n  legend.box.spacing,\n  panel.background,\n  panel.border,\n  panel.spacing,\n  panel.spacing.x,\n  panel.spacing.y,\n  panel.grid,\n  panel.grid.major,\n  panel.grid.minor,\n  panel.grid.major.x,\n  panel.grid.major.y,\n  panel.grid.minor.x,\n  panel.grid.minor.y,\n  panel.ontop,\n  plot.background,\n  plot.title,\n  plot.title.position,\n  plot.subtitle,\n  plot.caption,\n  plot.caption.position,\n  plot.tag,\n  plot.tag.position,\n  plot.tag.location,\n  plot.margin,\n  strip.background,\n  strip.background.x,\n  strip.background.y,\n  strip.clip,\n  strip.placement,\n  strip.text,\n  strip.text.x,\n  strip.text.x.bottom,\n  strip.text.x.top,\n  strip.text.y,\n  strip.text.y.left,\n  strip.text.y.right,\n  strip.switch.pad.grid,\n  strip.switch.pad.wrap,\n  complete = FALSE,\n  validate = TRUE\n)\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/list_environment.html",
    "href": "contents/list_environment.html",
    "title": "環境に関するグラフ",
    "section": "",
    "text": "並び替え\n      デフォルト\n      \n        分類\n      \n    \n  \n\n\n\n\n\n\n\n\n\n\n東京都の気温変化\n\n\n\n\n\n\n\n\n\n\n\n一致なし\n トップに戻る"
  },
  {
    "objectID": "contents/science/amino_acid/amino_acid.html",
    "href": "contents/science/amino_acid/amino_acid.html",
    "title": "アミノ酸略号一覧表",
    "section": "",
    "text": "PDFをダウンロード PNGをダウンロード\n\n\n PDFをダウンロード PNGをダウンロード\n\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/barplot/barplot.html",
    "href": "contents/memo/barplot/barplot.html",
    "title": "ggplot2を用いた棒グラフの作成",
    "section": "",
    "text": "目標\nggplot2を用いて左のグラフを作る。\n\n\n棒グラフ\nエラーバー（標準偏差）\n軸やラベルの編集\nテーマの作成\n\n\n\n\n\n\n\n\nグラフ作成の流れ\n\nデータの整形\n棒グラフの作成\n装飾\n\n\n\n\n1. データの整形\n\n1-1. データの確認・ライブラリのインポート\nR標準のデータセットchickwtsを使って棒グラフを作成します。\nデータセットchickwtsは、与えた餌ごとの鶏の体重のデータで、一列目weightに鶏の体重、二列目feedに餌の種類が記載されています。\n\n# データセットの中身の確認\nhead(chickwts)\n\n  weight      feed\n1    179 horsebean\n2    160 horsebean\n3    136 horsebean\n4    227 horsebean\n5    217 horsebean\n6    168 horsebean\n\n\nまずggplot2を使うために必要なtidyverseパッケージをインポートします。\nexactRankTestsパッケージは後で検定を行うときに使います。（検定を行わない場合は不要）\nggsignifパッケージは有意差をグラフ内に書き込むときに用います。（これも同様に、有意差を書き込まない場合は不要）\n\nlibrary(tidyverse) # ggplot2を使ってグラフを作成するのに必要\nlibrary(exactRankTests)　# 検定を行う際に使用（実施しない場合は不要）\nlibrary(ggsignif) # 有意差をグラフ内に書き込む際に使用\n\n\n\n1-2. 標準偏差データの追加\nデータセットは測定値しか含まれていません。\n棒グラフは平均値と標準偏差の値を用いて作成したいので、データを整形し、平均値と標準偏差をまとめた新しいデータセットchickwts_sum_dataを作成します。\nそのために、与えた餌feedごとにグループ化して、平均feed_meanと標準偏差sdを求めます。\n\nchickwts_sum_data &lt;- chickwts %&gt;%\n  group_by(feed) %&gt;%\n  summarize(weight_mean=mean(weight), sd=sd(weight))\n\n# 作成したデータセットの中身を確認\nhead(chickwts_sum_data)\n\n# A tibble: 6 × 3\n  feed      weight_mean    sd\n  &lt;fct&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 casein           324.  64.4\n2 horsebean        160.  38.6\n3 linseed          219.  52.2\n4 meatmeal         277.  64.9\n5 soybean          246.  54.1\n6 sunflower        329.  48.8\n\n\nこれでデータセットの準備は整いました。\n次は、作成したデータセットchickwts_sum_dataを用いてggplot2で棒グラフを作ります。\n\n\n\n\n2. 棒グラフの作成\nggplot2でグラフを作成し、bar_plotという変数に書き込んでいきます。\nまず、ggplot(データ, aes(x=x軸に使うデータ, y=y軸に使うデータ))を書き込みます。\n次にggplot2の棒グラフ作成関数であるgeom_bar()を使って棒グラフを作成します。geom_bar()内で指定しているstatは、データの扱い方です。デフォルトだと要素数をカウントしてしまうので、今回のように棒グラフの高さがそのまま入っているデータを扱う際はidentityを指定します。\n\nbar_plot &lt;- ggplot(chickwts_sum_data, aes(x=feed, y=weight_mean)) +\n  geom_bar(stat='identity')\n\nprint(bar_plot)\n\n\n\n\n\n\n\n\n\n\n\n3. 装飾\n\n3-1. エラーバーを付ける\ngeom_errorbarでエラーバーを付けます。yminとymaxはそれぞれ平均から標準偏差を引いた値と足した値を使うことでエラーバーの範囲を指定できます。\n\nbar_plot &lt;- bar_plot +\n  geom_errorbar(\n    aes(ymin = weight_mean - sd, ymax = weight_mean + sd),\n    width = 0.15, # エラーバー先端の幅\n    linewidth = 0.4 # エラーバーの太さ\n    )\n\nprint(bar_plot)\n\n\n\n\n\n\n\n\n\n\n3-2. 軸名を変更する\n\nbar_plot &lt;- bar_plot +\n  labs(\n    title = '飼料種別ニワトリ体重',  # タイトル\n    x = 'ニワトリ飼料',               # x軸タイトル\n    y = '平均体重',                   # y軸タイトル\n  )\n\nprint(bar_plot)\n\n\n\n\n\n\n\n\n\n\n3-3. 検定で有意差を示す\ncaseinとその他の飼料で検定を行います。\n検定にも様々ありますが、今回はウィルコクソンの順位和検定、有意水準0.05で検定します。\n\n\nhorsebeanlinseedmeatmealsoybeansunflower\n\n\n\ntest_casein_horsebean &lt;- wilcox.exact(\n  x = filter(chickwts, feed=='casein')[,1], \n  y = filter(chickwts, feed=='horsebean')[,1], \n  paired = FALSE)\nprint(test_casein_horsebean)\n\n\n    Exact Wilcoxon rank sum test\n\ndata:  filter(chickwts, feed == \"casein\")[, 1] and filter(chickwts, feed == \"horsebean\")[, 1]\nW = 117, p-value = 2.165e-05\nalternative hypothesis: true mu is not equal to 0\n\n\n\n\n\ntest_casein_linseed &lt;- wilcox.exact(\n  x = filter(chickwts, feed=='casein')[,1], \n  y = filter(chickwts, feed=='linseed')[,1], \n  paired = FALSE)\nprint(test_casein_linseed)\n\n\n    Exact Wilcoxon rank sum test\n\ndata:  filter(chickwts, feed == \"casein\")[, 1] and filter(chickwts, feed == \"linseed\")[, 1]\nW = 128.5, p-value = 0.0005325\nalternative hypothesis: true mu is not equal to 0\n\n\n\n\n\ntest_casein_meatmeal &lt;- wilcox.exact(\n  x = filter(chickwts, feed=='casein')[,1], \n  y = filter(chickwts, feed=='meatmeal')[,1], \n  paired = FALSE)\nprint(test_casein_meatmeal)\n\n\n    Exact Wilcoxon rank sum test\n\ndata:  filter(chickwts, feed == \"casein\")[, 1] and filter(chickwts, feed == \"meatmeal\")[, 1]\nW = 94, p-value = 0.09084\nalternative hypothesis: true mu is not equal to 0\n\n\n\n\n\ntest_casein_soybean &lt;- wilcox.exact(\n  x = filter(chickwts, feed=='casein')[,1], \n  y = filter(chickwts, feed=='soybean')[,1], \n  paired = FALSE)\nprint(test_casein_soybean)\n\n\n    Exact Wilcoxon rank sum test\n\ndata:  filter(chickwts, feed == \"casein\")[, 1] and filter(chickwts, feed == \"soybean\")[, 1]\nW = 138, p-value = 0.004283\nalternative hypothesis: true mu is not equal to 0\n\n\n\n\n\ntest_casein_sunflower &lt;- wilcox.exact(\n  x = filter(chickwts, feed=='casein')[,1], \n  y = filter(chickwts, feed=='sunflower')[,1], \n  paired = FALSE)\nprint(test_casein_sunflower)\n\n\n    Exact Wilcoxon rank sum test\n\ndata:  filter(chickwts, feed == \"casein\")[, 1] and filter(chickwts, feed == \"sunflower\")[, 1]\nW = 72.5, p-value = 0.9893\nalternative hypothesis: true mu is not equal to 0\n\n\n\n\n\n検定の結果、p-valueが有意水準0.05以下なのはhorsebean、linseed、soybeanの3つでした。\nしたがって、caseinからこれら３つのグラフに線を引いて、有意差を示していきます。\n\nbar_plot &lt;- bar_plot +\n  geom_signif(\n    comparisons = list(c('casein','horsebean')),\n    y_position = 400, \n    annotation = '***',\n    vjust = 0.7,\n    tip_length = 0.05\n  ) +\n  geom_signif(\n    comparisons = list(c('casein','linseed')),\n    y_position = 440, \n    annotation = '***',\n    vjust = 0.7,\n    tip_length = 0.05\n  ) +\n  geom_signif(\n    comparisons = list(c('casein','soybean')),\n    y_position = 480, \n    annotation = '**',\n    vjust = 0.7,\n    tip_length = 0.05\n  )\nprint(bar_plot)\n\n\n\n\n\n\n\n\n\n\n3-3. 背景・軸・目盛りをカスタムする\n\nbar_plot &lt;- bar_plot +\n  theme(\n    ## テキストの設定\n    plot.title = element_text(size = 13, color=\"black\", hjust = 0.5),\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(size = 10, color=\"black\", angle = 45, hjust = 1),\n    axis.title.y = element_text(size = 12, color=\"black\", hjust = 0.5),\n    axis.text.y = element_text(size = 10, color=\"black\", hjust = 0.5),\n    axis.ticks.x = element_blank(),\n    ## 枠・目盛りの設定\n    legend.title = element_blank(),\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.border = element_rect(color='black', fill='transparent', linewidth=0.8),\n    panel.background = element_rect(fill = \"white\",color = NA),\n    aspect.ratio = 1,\n  ) +\n  scale_y_continuous(limits=c(0,530), expand=c(0,0))\nprint(bar_plot)\n\n\n\n\n\n\n\n\nこのように作成したプロットbar_plotは、ggsaveコマンドで画像ファイルとして保存することができます。\nggsave(\n  plot = bar_plot,\n  file = './bar_plot.png',\n  dpi = 300,\n  width = 3.5,\n  height = 3.5\n)\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/background/backgroud.html",
    "href": "contents/memo/background/backgroud.html",
    "title": "ggplot2グラフの背景透過",
    "section": "",
    "text": "例として、次のグラフを考えます。\n\n\nコード\n\nlibrary(tidyverse)\n\nplot &lt;- ggplot(Indometh, aes(x=time, y=conc, )) +\n    geom_line(aes(color=Subject), linewidth=1) +\n    geom_point(aes(color=Subject),size=1.5) +\n    theme_bw() +\n    theme(legend.position = \"none\")\nprint(plot)\n\n\n\n\n実行結果\n\n\n\n\n\n\n\n\n\n\n\nここで作成したggplot2のグラフの背景を透過させるためには、theme()内で、panel.backgroundとplot.backgroundの背景を透過させます。\n具体的には、次のようにします。\n\nplot &lt;- plot +\n    theme(\n        panel.background = element_rect(fill = \"transparent\", color = NA),\n        plot.background = element_rect(fill = \"transparent\", color = NA)\n    )\n\nその結果、次のように、グラフの背景が透過されます。\n\n\n\n\n背景透過前\n\n\n\n\n背景透過後\n\n\n\n\n\n実用的には、背景透過のテーマを作っておいて、それを指定するのが便利です。\n\n\n\nmytheme.R\n\ntransparent_theme &lt;- theme(\n    panel.background = element_rect(fill = \"transparent\", color = NA),\n    plot.background = element_rect(fill = \"transparent\", color = NA)\n)\n\n\n\n\n\nplot.R\n\n# 作ったテーマが入っているファイルを読み込んで\nsource('./mytheme.R')\n# plotに足す\nplot &lt;- plot +\n    transparent_theme\n\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/memo/chemdraw_install/chemdraw_install.html",
    "href": "contents/memo/chemdraw_install/chemdraw_install.html",
    "title": "機関契約chemdrawのインストール・アクティベーションの方法",
    "section": "",
    "text": "アクティベーション方法が非常に分かりづらかったのでまとめました。\n\n1. ChemDraw Subscription Gallery を開く\nhttps://connect.revvitysignals.com/sitesubscription/Gallery.aspx\n上のURLでChemDraw Subscription Galleryを開き、“Search for Institution” に所属機関の名前を英語で入力します。\n検索すると所属機関の名前とともに、Registerボタンが表示されるので、押してください。\n\n\n2. ユーザー登録をする\n既にユーザー登録をしてあれば、Click here to Loginをクリックしてログインをします。\n新規ユーザーの場合はFirst nameから項目を埋めていきます。\n\n\n\n\n\n各項目の入力は日本語でも大丈夫です。\nZip/Postal Codeには郵便番号を記入します。記入する住所は所属機関で問題ないです。\nStateはNot US or Canadaを選択します。\n入力が完了して送信すると、登録したメールアドレスにメールが届きます。\nVERIFY YOUR EMAILを選択してください。\n\n\n3. ログインしてアクティべーションコードを入手する\nログイン画面からログインします。\nproduct activationに載っている文字列がアクティベーションコードです。\nこの文字列を使ってアクティベーションを行います。\n\n\n\n\n\n\n\n3. アプリをダウンロードしてアクティベーション\nダウンロード・インストールを行うとアクティベーションコードの入力を求められるので、先ほどのアクティベーションコードを入力します。\n\n\n\n\n トップに戻る"
  },
  {
    "objectID": "contents/environment/tokyo_temp/tokyo_temp.html",
    "href": "contents/environment/tokyo_temp/tokyo_temp.html",
    "title": "Cacical 「カシカル」",
    "section": "",
    "text": "環境 ggplot2"
  },
  {
    "objectID": "contents/environment/tokyo_temp/tokyo_temp.html#東京都の気温変化",
    "href": "contents/environment/tokyo_temp/tokyo_temp.html#東京都の気温変化",
    "title": "Cacical 「カシカル」",
    "section": "東京都の気温変化",
    "text": "東京都の気温変化\n1901年から2025年までの東京都の気温変化をまとめました。\n\n10年ごとの日別平均気温\n\n\n\n\n作成日\n2025-07-23\n\n\nデータ取得日\n2025-07-23\n\n\nデータ元\n気象庁　過去の気象データ・ダウンロード\n\n\n使用したパッケージ\nR, ggplot2, bash\n\n\n\nPNG画像をダウンロード\n\n\n\n東京都の年平均気温の推移\n1901年から2024年までの東京都の年平均気温の推移です。\n\n\n\n\n作成日\n2025-07-23\n\n\nデータ取得日\n2025-07-23\n\n\nデータ元\n気象庁　過去の気象データ・ダウンロード\n\n\n使用したパッケージ\nR, ggplot2, bash\n\n\n\nPNG画像をダウンロード\n\n\n\nRスクリプト\n\n10年ごとの日別平均気温東京都の年平均気温推移\n\n\nsetwd('~/code/graph/temperature')\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(viridis)\nlibrary(scales)\n\ndata &lt;- read.csv('./data/temp_1901to2025.csv', header=F) %&gt;%\n  rename('date'='V1', 'temp'='V2') %&gt;%\n  mutate(ymd = as.Date(date, format='%Y/%m/%d'), year=as.numeric(format(ymd, '%Y')), day=format(ymd, '%m%d')) %&gt;%\n  mutate(period = case_when(\n    year &gt;= 1901 & year &lt;=1910 ~ as.factor('1901-1910'),\n    year &gt;= 1911 & year &lt;=1920 ~ as.factor('1911-1920'),\n    year &gt;= 1921 & year &lt;=1930 ~ as.factor('1921-1930'),\n    year &gt;= 1931 & year &lt;=1940 ~ as.factor('1931-1940'),\n    year &gt;= 1941 & year &lt;=1950 ~ as.factor('1941-1950'),\n    year &gt;= 1951 & year &lt;=1960 ~ as.factor('1951-1960'),\n    year &gt;= 1961 & year &lt;=1970 ~ as.factor('1961-1970'),\n    year &gt;= 1971 & year &lt;=1980 ~ as.factor('1971-1980'),\n    year &gt;= 1981 & year &lt;=1990 ~ as.factor('1981-1990'),\n    year &gt;= 1991 & year &lt;=2000 ~ as.factor('1991-2000'),\n    year &gt;= 2001 & year &lt;=2010 ~ as.factor('2001-2010'),\n    year &gt;= 2011 & year &lt;=2020 ~ as.factor('2011-2020'),\n    year &gt;= 2021 & year &lt;=2030 ~ as.factor('2021-2025')\n    )\n  )\nsumdata &lt;- data %&gt;%\n  select(temp,day,period) %&gt;% \n  group_by(period,day) %&gt;%\n  summarize(meantemp=mean(temp)) %&gt;%\n  mutate(day=as.Date(day, format='%m%d'))\n\ntemp_plot &lt;-\n  ggplot(sumdata, aes(x=day, y=meantemp, group=period, color=period)) +\n  geom_line(aes(x=day, y=meantemp, group=period, color=period))\n\n## 装飾\nlibrary(RColorBrewer)\n#library(extrafont)\n#font_import()\n#loadfonts()\nhight &lt;- -1.3\nannotatesize = 4.5\ntemp_plot &lt;- temp_plot +\n  scale_color_viridis_d(option='H') +\n  annotate(\"text\", x=as.Date(\"2025-01-15\"), y=hight, , hjust=.5, label=\"1月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-02-15\"), y=hight, , hjust=.5, label=\"2月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-03-15\"), y=hight, , hjust=.5, label=\"3月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-04-15\"), y=hight, , hjust=.5, label=\"4月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-05-15\"), y=hight, , hjust=.5, label=\"5月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-06-15\"), y=hight, , hjust=.5, label=\"6月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-07-15\"), y=hight, , hjust=.5, label=\"7月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-08-15\"), y=hight, , hjust=.5, label=\"8月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-09-15\"), y=hight, , hjust=.5, label=\"9月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-10-15\"), y=hight, , hjust=.5, label=\"10月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-11-15\"), y=hight, , hjust=.5, label=\"11月\", family='Noto Sans JP', size=annotatesize) +\n  annotate(\"text\", x=as.Date(\"2025-12-15\"), y=hight, , hjust=.5, label=\"12月\", family='Noto Sans JP', size=annotatesize) +\n  scale_x_date(date_breaks = '1 month',\n               #date_labels = \"%b\",\n               expand=c(0.01,0),\n               ) +\n  labs(\n    title = '10年ごとの日別平均気温',\n    subtitle = '1901年から2025年までの日別平均気温を10年ごとにまとめています。',\n    y = expression(paste(\"気温 (\",degree*C,\")\"))\n  ) +\n  scale_y_continuous(limits=c(-2, 31), expand=c(0,0), breaks=c(seq(0,35,5))) +\n\n  theme(\n    ## テキストの設定\n    plot.title = element_text(family = \"sans\", size = 15, color=\"black\", hjust = 0),\n    plot.subtitle = element_text(family = \"sans\", size = 10, color=\"black\", hjust = 0),\n    axis.title.x = element_blank(),\n    axis.title.y = element_text(family = \"sans\", size = 13, color=\"black\", hjust = 0.5),\n    axis.text.x = element_blank(),\n    axis.text.y = element_text(family = \"sans\", size = 12, color=\"black\", hjust = 0.5),\n    axis.ticks.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    ## 枠・目盛りの設定\n    legend.title = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\"),\n    panel.grid.minor = element_blank(),\n    panel.background = element_rect(fill = \"white\",color = NA),\n    aspect.ratio=.6\n  )\n\nggsave(file = sprintf(\"./png/temp.png\"), plot=temp_plot, dpi = 600, width = 8, height = 5)\n\n\nsetwd('~/code/graph/temperature')\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(viridis)\nlibrary(scales)\n\ndata &lt;- read.csv('./data/temp_1901to2025.csv', header=F) %&gt;%\n  rename('date'='V1', 'temp'='V2') %&gt;%\n  mutate(ymd = as.Date(date, format='%Y/%m/%d'), year=as.numeric(format(ymd, '%Y')))\n\nsumdata &lt;- data %&gt;%\n  select(temp,year) %&gt;% \n  group_by(year) %&gt;%\n  summarize(meantemp=mean(temp, na.rm = TRUE))\nsumdata &lt;- filter(sumdata,year!='2025')\ntemp_barplot &lt;-\n  ggplot(sumdata, aes(x=year, y=meantemp)) +\n  geom_line(color='grey45') +\n  geom_point(shape=21, color='gray45', fill='white') +\n  geom_smooth(method = \"loess\", se=FALSE, color='black', linewidth=.5, span = .4)\n\n\n## 装飾\ntemp_barplot &lt;- temp_barplot +\n  labs(\n    title = '東京の平均気温推移',\n    subtitle = '1901年から2025年までの東京の年平均気温の推移',\n    y = expression(paste(\"気温 (\",degree*C,\")\"))\n  ) +\n  scale_x_continuous(limits=c(1900,2025), expand=c(0.02,0.02), breaks=c(seq(1900,2050,10)))+\n  scale_y_continuous(limits=c(12.8, 18.2), expand=c(0,0), breaks=c(seq(0,20,1))) +\n  \n  theme(\n    ## テキストの設定\n    plot.title = element_text(family = 'Ubuntu Mono', size = 15, color=\"black\", hjust = 0),\n    plot.subtitle = element_text(family = \"Noto sans JP\", size = 10, color=\"black\", hjust = 0),\n    axis.title.x = element_blank(),\n    axis.title.y = element_text(family = \"Noto sans JP\", size = 12, color=\"black\", hjust = 0.5),\n    axis.text.x = element_text(family = \"Noto sans JP\", size = 10, color=\"black\", angle = 45, hjust = 1),\n    axis.text.y = element_text(family = \"Noto sans JP\", size = 10, color=\"black\", hjust = 0.5),\n    axis.ticks.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    ## 枠・目盛りの設定\n    legend.title = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.3),\n    panel.grid.minor = element_blank(),\n    panel.background = element_rect(fill = \"white\",color = NA),\n    aspect.ratio=.5\n  )\n\n#temp_barplot\nggsave(file = sprintf(\"./png/temp_barplot_jp.png\"), plot=temp_barplot, dpi = 600, width = 7, height = 5)\n#library(png)\n#img &lt;- readPNG('./png/temp_barplot.png')\n#grid::grid.raster(img)\n\ntemp_barplot_en &lt;- temp_barplot +\n  labs(\n    title = 'Annual average temperature trends in Tokyo',\n    subtitle = 'Changes in Tokyo\\'s average annual temperature from 1901 to 2025',\n    y = expression(paste(\"Temperature (\",degree*C,\")\"))\n  ) +\n  scale_x_continuous(limits=c(1900,2025), expand=c(0.02,0.02), breaks=c(seq(1900,2050,10)))+\n  scale_y_continuous(limits=c(12.8, 18.2), expand=c(0,0), breaks=c(seq(0,20,1))) +\n  \n  theme(\n    ## テキストの設定\n    plot.title = element_text(family = 'Ubuntu Mono', size = 15, color=\"black\", hjust = 0),\n    plot.subtitle = element_text(family = \"Ubuntu Mono\", size = 10, color=\"black\", hjust = 0),\n    axis.title.x = element_blank(),\n    axis.title.y = element_text(family = \"Ubuntu Mono\", size = 12, color=\"black\", hjust = 0.5),\n    axis.text.x = element_text(family = \"Ubuntu Mono\", size = 10, color=\"black\", angle = 45, hjust = 1),\n    axis.text.y = element_text(family = \"Ubuntu Mono\", size = 10, color=\"black\", hjust = 0.5),\n    axis.ticks.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    ## 枠・目盛りの設定\n    legend.title = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\", linewidth = 0.3),\n    panel.grid.minor = element_blank(),\n    panel.background = element_rect(fill = \"white\",color = NA),\n    aspect.ratio=.5\n  )\nggsave(file = sprintf(\"./png/temp_barplot_en.png\"), plot=temp_barplot_en, dpi = 600, width = 7, height = 5)"
  },
  {
    "objectID": "contents/list_society.html",
    "href": "contents/list_society.html",
    "title": "society -社会-",
    "section": "",
    "text": "並び替え\n      デフォルト\n      \n        日付 - 日付（昇順）\n      \n      \n        日付 - 日付（降順）\n      \n      \n        分類\n      \n    \n  \n\n\n\n\n\n\n\n\n\n\n地図で探す「2025ハロウィーンイベント🎃」\n\n\n全国のハロウィーンイベントを地図から探すことができます。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n市町村別高齢者割合マップ\n\n\n\nsociety\n\n高齢化\n\n\n\n市町村別の65歳以上人口の割合をヒートマップで示したグラフです。スクリプトも公開しています。完全フリーです。\n\n\n\n\n\n2025/08/27\n\n\n\n\n\n\n\n\n\n\n\n\n日本の総人口の推移グラフ\n\n\n\nsociety\n\n折れ線グラフ\n\n\n\n総務省統計局のデータを基に作成した日本の総人口の推移グラフです。完全フリーで公開しています。\n\n\n\n\n\n2025/08/31\n\n\n\n\n\n一致なし\n トップに戻る"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Cacical 「カシカル」",
    "section": "",
    "text": "カシカルは\nRのグラフ作成パッケージggplot2で作成したグラフや、\nプログラミングに関する備忘録をまとめた個人サイトです。\n\n\n\n\n\n\n\n使用時の注意事項：クリックして表示\n\n\n\n\n\n\n完全フリーですが、一部使用用途を制限しているコンテンツがあります。（その場合はページに記載しています。）\n掲載している内容（グラフ・スクリプト・文章）は十分に気を付けていますが、間違いを含んでいる可能性があります。何かに使う時は、各ページに書いてある出典元を確認してください。\n\n\n\n\n\n\n\n  \n    \n    \n    \n  \n  \n    \n      \n    \n    \n      \n    \n    \n      \n    \n  \n  \n    \n    Previous\n  \n  \n    \n    Next\n  \n\n\n\n\n\n\n トップに戻る"
  }
]